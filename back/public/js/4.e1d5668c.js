(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{ca22:function(o,e,t){"use strict";t.r(e);var a=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("componenteindex",{attrs:{titulo:o.titulo,rotabase:o.rotabase,tablerow:o.tr,cols:o.colunas,importandexport:o.importandexport,copiarlinha:o.copiarlinha,nomeexcel:o.nomeexcel}}),t("q-dialog",{attrs:{persistent:""},model:{value:o.notificationdialog,callback:function(e){o.notificationdialog=e},expression:"notificationdialog"}},[t("q-card",[t("q-form",{staticClass:"q-gutter-sm",on:{submit:o.onSubmit}},[t("q-card-section",[o.createform?t("div",{staticClass:"text-h6",staticStyle:{color:"darkblue"}},[o._v("sCriar contrato")]):o._e(),o.createform?o._e():t("div",{staticClass:"text-h6",staticStyle:{color:"darkred"}},[o._v("Remover contrato")])]),t("q-card-section",[t("q-btn-toggle",{attrs:{name:"Tipo",push:"","toggle-color":"blue",options:o.options},model:{value:o.form.tipo,callback:function(e){o.$set(o.form,"tipo",e)},expression:"form.tipo"}})],1),t("q-card-section",{staticClass:"q-pt-none"},[t("q-input",{attrs:{dense:"",autofocus:"",maxlength:"30",label:"Nome",title:"Informe o nome completo do contratante",hint:"Informe o nome completo do contratante",clearable:"","lazy-rules":"",rules:[function(e){return o.$v.form.nome.required||"Este campo é obrigatório."}]},model:{value:o.form.nome,callback:function(e){o.$set(o.form,"nome",e)},expression:"form.nome"}})],1),t("q-card-section",{staticClass:"q-pt-none"},[t("q-input",{attrs:{label:"E-mail",title:"Informe o emaildo contratante",hint:"Informe o emaildo contratante",dense:"",type:"email",clearable:"","lazy-rules":"",rules:[function(e){return o.$v.form.email.email||"Digite um e-mail válido."},function(e){return o.$v.form.nome.required||"Este campo é obrigatório."}]},model:{value:o.form.email,callback:function(e){o.$set(o.form,"email",e)},expression:"form.email"}})],1),t("q-card-section",{staticClass:"q-pt-none"},[o.form.tipo?t("q-input",{attrs:{dense:"",label:"CPF",title:"Informe o CPF do contratante",hint:"Informe o CPF do contratante",clearable:"",mask:"###.###.###-##",rules:[function(e){return o.$v.form.cpf.cpfvalidator||"Digite um CPF válido."},function(e){return o.$v.form.cpf.required||"Este campo é obrigatório."}]},model:{value:o.form.cpf,callback:function(e){o.$set(o.form,"cpf",e)},expression:"form.cpf"}}):o._e(),o.form.tipo?o._e():t("q-input",{attrs:{dense:"",label:"CNPJ",title:"Informe o CNPJ do contratante",hint:"Informe o CNPJ do contratante",clearable:"",mask:"##.###.###/####-##",rules:[function(e){return o.$v.form.cnpj.cnpjvalidator||"Digite um CNPJ válido x."},function(e){return o.$v.form.cnpj.required||"Este campo é obrigatório."}]},model:{value:o.form.cnpj,callback:function(e){o.$set(o.form,"cnpj",e)},expression:"form.cnpj"}})],1),t("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar"},on:{click:o.Cancel}}),o.createform?t("q-btn",{attrs:{flat:"",label:"Salvar contrato",type:"submit",color:"primary"}}):o._e(),o.createform?o._e():t("q-btn",{attrs:{flat:"",label:"remover contrato",type:"submit",color:"negative"}})],1)],1)],1)],1)],1)},r=[],i=(t("e6cf"),t("b5ae")),n=t("1f5a"),l=t("bff7"),c=t("deb6");const s=o=>n["b"].isValid(o),m=o=>n["a"].isValid(o);var f={mixins:[l["a"],c["a"]],data(){return{importandexport:!1,importandexport:!1,copiarlinha:!1,nomeexcel:"Imoveis",titulo:"de imoveis",rotabase:"/imovel/",tr:"<tr><th>Cod./id</th><th>Endereço</th><th>Status</th><th>Ações</th></tr>",options:[{label:"Pessoa Física",value:!0},{label:"Pessoa Jurídica",value:!1}],colunas:[{data:"id",name:"id"},{data:"endereco",name:"endereco"},{data:"status",name:"status"},{data:"action",name:"action",orderable:!1,searchable:!1}],form:{localid:"",nome:"",cpf:"",cnpj:"",email:"",tipo:!0},notificationdialog:!1,createform:!0}},beforeCreate(){},async mounted(){let o=this;$("#users-table").on("click","button.datatables_contrato",(function(e){o.createform=!0,o.form.localid=$(this).val(),o.notificationdialog=!0})),$("#users-table").on("click","button.datatables_remover_contrato",(function(e){o.createform=!1,o.show($(this).val())}))},methods:{async show(o){let e=this,t=await e.axiosget("/contrato/"+o+"/edit");200==t.status&&(t=t.data[0],console.log(t),e.form.localid=o,e.form.nome=t.nome,null==t.cpf?(e.form.cnpj=t.cnpj,e.form.tipo=!1):(e.form.cpf=t.cpf,e.form.tipo=!0),e.form.email=t.email,e.notificationdialog=!0)},Cancel(){this.ClearForm()},ClearForm(){let o=this;o.form.localid="",o.form.nome="",o.form.cpf="",o.form.cnpj="",o.form.email="",o.form.tipo=!0,$("#users-table").DataTable().ajax.reload(),o.notificationdialog=!1},async onSubmit(o){let e=this,t="";if(e.createform){let o=new FormData;o.append("imovel_id",e.form.localid),o.append("nome",e.form.nome),e.form.tipo?o.append("cpf",e.form.cpf):o.append("cnpj",e.form.cnpj),o.append("email",e.form.email),o.append("tipo",e.form.tipo),t=await e.axiospost("/contrato",o),e.errorsbag=!1,422==t.status||"422"==t.status?(e.errorsresposta=t.data.errors,e.errorsbag=!0):e.ClearForm()}else t=await e.axiosdelete(e.form.localid,"/contrato/"),console.log("resposta",t),e.ClearForm(),e.notificationdialog=!1}},validations:{form:{email:{required:i["required"],email:i["email"]},nome:{required:i["required"]},cpf:{cpfvalidator:s,required:i["required"]},cnpj:{cnpjvalidator:m,required:i["required"]}}}},p=f,d=t("2877"),u=t("24e8"),b=t("f09f"),v=t("0378"),g=t("a370"),h=t("6a67"),q=t("27f9"),C=t("4b7e"),x=t("9c40"),j=t("7f67"),k=t("eebe"),w=t.n(k),_=Object(d["a"])(p,a,r,!1,null,null,null);e["default"]=_.exports;w()(_,"components",{QDialog:u["a"],QCard:b["a"],QForm:v["a"],QCardSection:g["a"],QBtnToggle:h["a"],QInput:q["a"],QCardActions:C["a"],QBtn:x["a"]}),w()(_,"directives",{ClosePopup:j["a"]})}}]);